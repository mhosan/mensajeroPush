<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servidor Push Notif.</title>
    <!-- <link rel="stylesheet" href="stylesheets/style.css"> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"
        integrity="sha512-v8ng/uGxkge3d1IJuEo6dJP8JViyvms0cly9pnbfRxT6/31c3dRWxIiwGnMSWwZjHKOuY3EVmijs7k1jz/9bLA=="
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <p class="text-center h4 pt-3 pb-3">Servidor push</p>

        <div class="card" style="width: 40rem; margin-left: auto; margin-right: auto; ">
            <div class="card-header text-center h5">
                Enviar mensajes
            </div>
            <div class="card-body" style="margin-left:auto; margin-right:auto;">
                <h6 class="card-title" style="text-decoration:underline;">Detalle</h6>
                <form id="miForm">
                    <input type="text" placeholder="Escribir mensage" id="message" autofocus>
                    <button class="btn btn-primary">Enviar</button>
                </form>
                <p class="card-text" id="totalPush"></p>
                <ul class="list-group list-group-flush" id="listaPush" style="height: 90px; overflow: auto;">
                </ul>
            </div>
            <div class="card-footer text-muted text-center font-italic">
                &copy;Desarrollos ..., todos los derechos reservandos.
            </div>
        </div>
    </div>

    <script src="./main.js"></script>
</body>

</html>

<!-- <body>
    <div class="container">
        <div class="card " style="width: 40rem; ">
            <div class="card-header text-center h5">
                Servidor Multiplayer On Line
            </div>
            <img src="/images/servidor.jpg" class="d-flex justify-content-center" alt="...">
            <div class="card-body">
                <h6 class="card-title" style="text-decoration:underline;">Detalle usuarios</h6>
                <p class="card-text" id="ws"></p>
                <ul class="list-group list-group-flush" id="lista" style="height: 90px; overflow: auto;">
                </ul>
                <a href="#" class="btn btn-primary">Help</a>
            </div>
            <div class="card-footer text-muted text-center font-italic">
                &copy;Desarrollos pirulo, todos los derechos reservandos.
            </div>
        </div>
    </div>

    <script>
        $('#ws').html('Sin conexiones');
        const socket = io.connect();
        socket.on('pagina', (data) => {
            if (data.contador == 0) {
                $('#ws').html('No hay nadie conectado');
                $('#lista').empty();
            } else {
                if (data.conexion) {  //data.conexion=true: se conectó alguien
                    $('#ws').html(
                        'Total de usuarios conectados: ' +
                        '<div class="badge badge-primary text-wrap" style="width: 2rem;">' + (data.contador) + '</div><br>'
                    );
                    $('#lista').append('<li class="list-group-item" id="' + data.id + '"> Usuario: ' + data.nombre + ',  Id: ' + data.id + '</li>');

                } else { // se desconectó alguien
                    $('#ws').html(
                        'Total de usuarios conectados: ' +
                        '<div class="badge badge-primary text-wrap" style="width: 2rem;">' + (data.contador) + '</div><br>'
                    );
                    $('#' + data.id).remove();
                }
            }
        });
        // socket.emit('pagina', { dato: 'soy yo, la página' });
    </script>
</body> -->